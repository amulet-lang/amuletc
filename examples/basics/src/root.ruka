/*
 *
 */

pub const Buffer = @import("buffer.ruka")
pub const io = @import("io.ruka")

pub const Vector = module {
    pub const t = record {
        x: u8,
        y: u8
    }

    pub const new = (x, y) do
        t.{ x, y }
    end

    pub const add = (self: t, other: t) do
        t.{
            x = self.x + other.x,
            y = self.y + other.y
        }
    end

    pub const write = (self: t, writer: any io.Writer) do
        writer.writeRecord(self).?
    end

    test "addition" {
        const testcase = record {
            a: t,
            b: t,
            want: t
        }

        //let t: @map(string, testcase) = .{
        let tests = [string, testcase]{
            "addition": .{
                num: new(1, 2),
                div: new(3, 4),
                want: new(4, 6)
            }
        }

        for k, v in tests do
            let result = v.a.add(v.b)
            @expect(result == v.want).?
            @println("test: #{k} passed")
        end
    }
}
