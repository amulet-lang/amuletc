/*
 * Program to split a string
 */

use std.(string, iter, testing);

fn strsplit -> [..]string = (
    str: string, 
    ch: char
) do
    var indices = [..]int;
    str.foreach_idx() <| (c: char, i: int) do
        if (c == ch) => indices.push(i);
    end

    iter.split_at(str, indices)
end

fn main = () do
    let words = "Hello, world!"
        |> strsplit(' ');

    testing.assert(words.len() == 2);

    return ();
end
