pub const fibonacci -> int = (n: int) {
    const BUFFER_SIZE = 50
    let mut cache = [BUFFER_SIZE]{0, 1, 1, -1}

    fibonacci'(n, mut cache[..])
}

const fibonacci' -> int = (n: int, mut arr: []int) {
    if n < 0 {
        0
    } else if cache[n] != -1 {
        cache[n]
    } else {
        cache[n] = fibonacci'(n-1) + fibonacci'(n-2)
        cache[n]
    }
}

test "fibonacci" -> Result(unit) = () {
    let result = fibonacci(5)
    @.assert(result == 5)?

    Ok <| ()
}
