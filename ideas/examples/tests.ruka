fn div -> @result(usize) = (num, div: usize) do
    if div == 0 do
        return error.DivideByZero
    end

    num / div
end

test "div" {
    const testcase = record {
        num: usize,
        div: usize,
        want: @result(usize)
    }

    let t: @map(string, testcase) = %[string, testcase]{
        "divide by zero" => .{
            num: 10,
            div: 0,
            want: error.DivideByZero
        },
        "6 / 2" => .{
            num: 6,
            div: 2,
            want: 3
        }
    }

    for _, v in t do
        let result = div(v.num, v.div)
        @assert(result == v.want).!
    end
}
